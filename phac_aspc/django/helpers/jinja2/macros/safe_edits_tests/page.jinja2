{% import 'macros/safe_edits.jinja2' as safe_edits %}
<html>
  <head>
    <title>Safe Edits Playground</title>
    <link rel="shortcut icon"
          type="image/png"
          href="{{ static('favicon.ico')}}"/>
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap/dist/css/bootstrap.min.css">
    <style>
    body {
      padding: 15px;
    }
    </style>
  </head>
  <body>
    <h1>Safe edits Playground</h1>
    <p>
      If the forms are modified, the "Bypass" buttons will allow navigation away
      from the page. The other buttons will not. Reloading the page will also
      be prevented.
    </p>
    <div class="container">
      <div class="row">
        <div class="col-sm">
          <h2>Using call syntax</h2>
          {% with form_id="call_syntax" %}
            {% include "macros/safe_edits_tests/call_form.jinja2" %}
          {% endwith %}
        </div>
        <div class="col-sm">
          <h2>Registering existing form</h2>
          {% with form_id="existing_form" %}
            {% include "macros/safe_edits_tests/form.jinja2" %}
          {% endwith %}
        </div>
      </div>
      <div class="row">
        <div class="col-sm">
          <h2>HTMX loaded call syntax</h2>
          <button class="btn btn-primary"
                  hx-get="{{ url('safe_edits_tests_call_form') }}"
                  hx-target="#htmx_call_goes_here">
            Load
          </button>
          <div id="htmx_call_goes_here"></div>
        </div>
        <div class="col-sm">
          <h2>HTMX loaded existing syntax</h2>
          <button class="btn btn-primary"
                  hx-get="{{ url('safe_edits_tests_form') }}"
                  hx-target="#htmx_goes_here">Load</button>
          <div id="htmx_goes_here"></div>
        </div>
      </div>
      <div class="row">
        <div class="col-sm">
          <h2>
            Reset button <small>(this form only)</small>
          </h2>
          {% call safe_edits.register() %}
            <form>
              <div class="form-group">
                <label>Some Text</label>
                <input type="text" class="form-control">
              </div>
              <div class="row">
                {% call safe_edits.bypass(class="col-sm") %}
                  <button type="submit" class="btn btn-primary">Bypass</button>
                {% endcall %}
                <div class="col-sm">
                  <button type="submit" class="btn btn-secondary">Normal Submit</button>
                </div>
                {% call safe_edits.reset(class="col-sm") %}
                  <button type="reset" class="btn btn-secondary">Reset</button>
                {% endcall %}
              </div>
            </form>
          {% endcall %}
        </div>
        <div class="col-sm">
          <h2>
            Reset button <small>(all forms)</small>
          </h2>
          <div class="alert alert-info" role="alert">
            If the reset button isn't part of a registered container, the dirty
            status for all forms is reset.
          </div>
          <form>
            <div id="reset_all_test">
              <div class="form-group">
                <label>Some Text</label>
                <input type="text" class="form-control">
              </div>
            </div>
            <div class="row">
              {% call safe_edits.bypass(class="col-sm") %}
                <button type="submit" class="btn btn-primary">Bypass</button>
              {% endcall %}
              <div class="col-sm">
                <button type="submit" class="btn btn-secondary">Normal Submit</button>
              </div>
              {% call safe_edits.reset(class="col-sm") %}
                <button type="reset" class="btn btn-secondary">Reset</button>
              {% endcall %}
            </div>
          </form>
          {{ safe_edits.register('reset_all_test') }}
        </div>
      </div>
    </div>
    <script src="{{static('thirdparty/htmx.min.js')}}"></script>
    <script src="{{static('thirdparty/alpine.min.js')}}" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    {{ safe_edits.init() }}
  </body>
</html>
